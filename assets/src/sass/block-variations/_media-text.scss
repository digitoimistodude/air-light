// WordPress uses custom properties with double dashes from theme.json that don't match kebab-case
// stylelint-disable custom-property-pattern, csstools/value-no-unknown-custom-properties
@use '../variables' as *;
@use '../components/button' as *;

// Core/media-text block variation styles
.wp-block-media-text {
  gap: var(--spacing-grid-gap);
  padding-left: var(--spacing-container-padding-inline);
  padding-right: var(--spacing-container-padding-inline);

  .wp-block-heading {
    margin: 0;
  }

  // Media area with aspect ratio constraint
  // Using aspect-ratio instead of fixed height for better responsiveness
  // Images use object-fit: cover to fill the container while maintaining aspect
  .wp-block-media-text__media {
    aspect-ratio: 4 / 3;
    background-color: var(--color-placeholder, #f0f0f0);

    // Ensure images fill container with object-fit cover
    // This prevents portrait images from expanding the block height
    img {
      height: 100%;
      object-fit: cover;
      width: 100%;
    }

    // When image is present, remove placeholder background
    &:has(img),
    &:has(video) {
      background-color: transparent;
    }
  }

  // Editor-specific: also target the resizable container
  .editor-media-container__resizer {
    aspect-ratio: 4 / 3;

    img {
      height: 100%;
      object-fit: cover;
      width: 100%;
    }
  }

  // Content area spacing
  .wp-block-media-text__content {
    padding: 2rem;

    > *:first-child {
      margin-top: 0;
    }

    > *:last-child {
      margin-bottom: 0;
    }
  }

  // Button styles
  .wp-block-buttons {
    justify-content: flex-start; // Override WordPress default center alignment
  }

  .wp-block-button {
    text-align: left;
  }

  .wp-block-button__link {
    @include button();
    display: inline-block;
    text-align: center;
  }

  // Wide alignment adjustments
  &.alignwide {
    margin-inline: auto;
    max-width: var(--wp--custom--grid-base);
  }

  // Full alignment adjustments
  &.alignfull {
    padding-inline: var(--spacing-container-padding-inline);
  }

  // Padding variations (default: M padding)
  &.is-style-has-m-padding {
    padding-bottom: 5rem;
    padding-top: 5rem;
  }

  &.is-style-has-l-padding {
    padding-bottom: 8rem;
    padding-top: 8rem;
  }

  &.is-style-no-padding {
    padding-bottom: 0;
    padding-top: 0;
  }
}

// Editor-specific styles
.editor-styles-wrapper .wp-block-media-text .wp-block-media-text__media {
  // Show placeholder in editor when no media selected
  &:empty,
  &:has(.block-editor-media-placeholder) {
    background-color: var(--color-placeholder, #f0f0f0);
    min-height: 18.75rem;
  }
}
